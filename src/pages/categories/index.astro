---
import { getCollection } from 'astro:content';
import Base from "@/layouts/Base.astro";
import PostCard from "@/components/PostCard.astro";

const allPosts = await getCollection('posts', ({ data }) => !data.draft);

const latestPosts = allPosts
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
  .slice(0, 9); // Adjust number as you like (your live site shows 9)
---

<Base title="Txchyon Capital" description="Advanced crypto research, airdrop farming guides, and trading strategies.">
  <div class="container mx-auto py-12 px-4">
    <div class="text-center mb-16">
      <h1 class="text-5xl font-bold mb-6">Txchyon Capital</h1>
      <p class="text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed">
        Advanced crypto research, airdrop farming guides, and trading strategies.
      </p>
    </div>

    <h2 class="text-4xl font-bold text-center mb-12">Latest Research & Guides</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {latestPosts.length > 0 ? (
        latestPosts.map(post => (
          <PostCard post={post} />
        ))
      ) : (
        <p class="col-span-full text-center text-gray-500 py-12">No posts published yet.</p>
      )}
    </div>
  </div>
</Base>