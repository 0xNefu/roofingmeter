---
import config from "@/config/config.json";
import Base from "@/layouts/Base.astro";
import { markdownify } from "@/lib/utils/textConverter";
import type { CollectionEntry } from "astro:content";
import { getEntry } from "astro:content";
import { FaAddressCard, FaEnvelope, FaPhoneAlt, FaClock, FaMapMarkerAlt, FaUserTie } from "react-icons/fa";

const entry = (await getEntry(
  "contact",
  "-index"
)) as CollectionEntry<"contact">;
const { contact_form_action } = config.params;
const { address, email, phone } = config.contactinfo;
const { title, description, meta_title, image } = entry.data;
---

<Base
  title={title}
  meta_title={meta_title}
  description={description}
  image={image}
>
  <section class="py-16 md:py-20 bg-gradient-to-b from-white to-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        
        {/* Hero Header */}
        <div class="text-center mb-12 md:mb-16">
          <h1 class="text-3xl md:text-5xl font-bold text-gray-900 mb-4 md:mb-6">
            Contact <span class="text-blue-600">RoofingMeter</span>
          </h1>
          <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
            Get in touch with our roofing experts for help with cost estimates, contractor recommendations, or general roofing questions.
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 md:gap-12">
          
          {/* Contact Information Sidebar */}
          <div class="lg:col-span-1">
            <div class="bg-white rounded-2xl border border-gray-200 p-6 md:p-8 shadow-lg">
              <h2 class="text-2xl font-bold text-gray-900 mb-6">Contact Information</h2>
              
              <div class="space-y-8">
                {/* Phone */}
                <div class="flex items-start gap-4">
                  <div class="bg-blue-100 p-3 rounded-lg">
                    <FaPhoneAlt className="text-blue-600 text-xl" />
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-1">Phone Number</h3>
                    <a href="tel:+18885557663" class="text-blue-600 hover:text-blue-700 text-xl font-bold">
                      1-888-555-ROOF
                    </a>
                    <p class="text-gray-600 text-sm mt-1">Free roofing consultation</p>
                  </div>
                </div>

                {/* Email */}
                <div class="flex items-start gap-4">
                  <div class="bg-blue-100 p-3 rounded-lg">
                    <FaEnvelope className="text-blue-600 text-xl" />
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-1">Email Address</h3>
                    <a href="mailto:contact@roofingmeter.com" class="text-blue-600 hover:text-blue-700 text-lg font-medium">
                      contact@roofingmeter.com
                    </a>
                    <p class="text-gray-600 text-sm mt-1">General inquiries</p>
                  </div>
                </div>

                {/* Service Area */}
                <div class="flex items-start gap-4">
                  <div class="bg-blue-100 p-3 rounded-lg">
                    <FaMapMarkerAlt className="text-blue-600 text-xl" />
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-1">Service Area</h3>
                    <p class="text-gray-700">
                      Nationwide roofing resources & contractor database
                    </p>
                    <p class="text-gray-600 text-sm mt-1">Local contractors available in all 50 states</p>
                  </div>
                </div>

                {/* Business Hours */}
                <div class="flex items-start gap-4">
                  <div class="bg-blue-100 p-3 rounded-lg">
                    <FaClock className="text-blue-600 text-xl" />
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-1">Response Time</h3>
                    <p class="text-gray-700">
                      Within 24 hours for email inquiries
                    </p>
                    <p class="text-gray-600 text-sm mt-1">Phone support: Mon-Fri 9AM-6PM EST</p>
                  </div>
                </div>
              </div>

              {/* Quick Links */}
              <div class="mt-10 pt-8 border-t border-gray-200">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Links</h3>
                <div class="space-y-3">
                  <a href="/free-estimate" class="flex items-center gap-3 text-blue-600 hover:text-blue-700 p-3 hover:bg-blue-50 rounded-lg transition">
                    <span class="text-xl">üí∞</span>
                    <span>Get Free Cost Estimate</span>
                  </a>
                  <a href="/find-contractors" class="flex items-center gap-3 text-blue-600 hover:text-blue-700 p-3 hover:bg-blue-50 rounded-lg transition">
                    <span class="text-xl">üë∑</span>
                    <span>Find Local Contractors</span>
                  </a>
                  <a href="/faq" class="flex items-center gap-3 text-blue-600 hover:text-blue-700 p-3 hover:bg-blue-50 rounded-lg transition">
                    <span class="text-xl">‚ùì</span>
                    <span>Frequently Asked Questions</span>
                  </a>
                </div>
              </div>
            </div>
          </div>

          {/* Contact Form */}
          <div class="lg:col-span-2">
            <div class="bg-white rounded-2xl border border-gray-200 p-6 md:p-8 shadow-lg">
              <h2 class="text-2xl font-bold text-gray-900 mb-2">Send Us a Message</h2>
              <p class="text-gray-600 mb-8">
                Fill out the form below and our roofing experts will get back to you as soon as possible.
              </p>
              
              <form
                class="space-y-6"
                method="POST"
                action={contact_form_action}
              >
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="block text-gray-700 font-medium mb-2" for="name">
                      Full Name <span class="text-red-500">*</span>
                    </label>
                    <input
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"
                      name="name"
                      type="text"
                      placeholder="John Smith"
                      required
                    />
                  </div>
                  <div>
                    <label class="block text-gray-700 font-medium mb-2" for="email">
                      Email Address <span class="text-red-500">*</span>
                    </label>
                    <input
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"
                      name="email"
                      type="email"
                      placeholder="john@example.com"
                      required
                    />
                  </div>
                </div>

                <div>
                  <label class="block text-gray-700 font-medium mb-2" for="phone">
                    Phone Number
                  </label>
                  <input
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"
                    name="phone"
                    type="tel"
                    placeholder="(123) 456-7890"
                  />
                </div>

                <div>
                  <label class="block text-gray-700 font-medium mb-2" for="subject">
                    Inquiry Type
                  </label>
                  <select
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 bg-white"
                    name="subject"
                  >
                    <option value="">Select an option</option>
                    <option value="cost-estimate">Cost Estimate Question</option>
                    <option value="contractor-referral">Contractor Recommendation</option>
                    <option value="material-question">Material Question</option>
                    <option value="repair-advice">Repair Advice</option>
                    <option value="website-feedback">Website Feedback</option>
                    <option value="other">Other</option>
                  </select>
                </div>

                <div>
                  <label class="block text-gray-700 font-medium mb-2" for="message">
                    Your Message <span class="text-red-500">*</span>
                  </label>
                  <textarea
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"
                    name="message"
                    rows="6"
                    placeholder="Please describe your roofing project, questions, or concerns..."
                    required
                  ></textarea>
                </div>

                {/* Project Details */}
                <div class="bg-blue-50 border border-blue-200 rounded-xl p-6">
                  <h3 class="text-lg font-semibold text-gray-900 mb-4">Optional Project Details</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label class="block text-gray-600 text-sm mb-2" for="roof-type">
                        Roof Type
                      </label>
                      <select
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"
                        name="roof-type"
                      >
                        <option value="">Not specified</option>
                        <option value="asphalt">Asphalt Shingles</option>
                        <option value="metal">Metal Roofing</option>
                        <option value="tile">Tile Roofing</option>
                        <option value="slate">Slate Roofing</option>
                        <option value="flat">Flat Roof</option>
                        <option value="other">Other</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-gray-600 text-sm mb-2" for="project-type">
                        Project Type
                      </label>
                      <select
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"
                        name="project-type"
                      >
                        <option value="">Not specified</option>
                        <option value="new-roof">New Roof Installation</option>
                        <option value="replacement">Roof Replacement</option>
                        <option value="repair">Roof Repair</option>
                        <option value="maintenance">Maintenance/Inspection</option>
                        <option value="insurance">Insurance Claim</option>
                      </select>
                    </div>
                  </div>
                </div>

                <button 
                  type="submit"
                  class="w-full py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-bold rounded-xl hover:shadow-xl hover:shadow-blue-500/30 transition-all hover:-translate-y-1"
                >
                  SEND MESSAGE TO ROOFING EXPERTS
                </button>
              </form>
            </div>

            {/* Emergency Contact */}
            <div class="mt-8 bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl p-6">
              <div class="flex items-start gap-4">
                <div class="text-3xl text-red-600">üö®</div>
                <div>
                  <h3 class="text-xl font-bold text-gray-900 mb-2">Emergency Roofing Situation?</h3>
                  <p class="text-gray-700 mb-4">
                    If you have an active leak, storm damage, or immediate safety concern, 
                    please contact a local roofing contractor directly for emergency service.
                  </p>
                  <a 
                    href="/find-contractors" 
                    class="inline-flex items-center gap-2 px-5 py-3 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors"
                  >
                    üë∑ FIND EMERGENCY ROOFERS NEAR YOU
                  </a>
                </div>
              </div>
            </div>

            {/* Txchyon Capital Attribution */}
            <div class="mt-8 pt-6 border-t border-gray-200 text-center">
              <p class="text-gray-500 text-sm">
                <span class="font-medium text-gray-700">RoofingMeter</span> is a property of 
                <span class="text-blue-600 font-medium"> Txchyon Capital</span>.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <style>
    /* Form styling */
    input, select, textarea {
      transition: all 0.2s ease;
    }
    
    input:focus, select:focus, textarea:focus {
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    /* Smooth transitions */
    * {
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
  </style>
</Base>